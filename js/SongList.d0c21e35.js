(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["SongList"],{"47c4":function(t,e,i){},"4c86":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"d-flex align-items-center justify-content-between mt-5"},[i("h1",{staticClass:"text-light font-weight-bold"},[t._v(t._s(t.title))]),i("button",{staticClass:"btn btn-outline-light",on:{click:t.playKKlist}},[t._v("試聽此歌單")])]),i("hr"),i("TopThreeCard",{attrs:{listData:t.topThree}}),i("ListTable",{attrs:{listData:t.other,start:4}})],1)},s=[],o=(i("a4d3"),i("99af"),i("4de4"),i("4160"),i("fb6a"),i("b0c0"),i("e439"),i("dbb4"),i("b64b"),i("159b"),i("ade3")),a=i("8785"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"topThree my-5 row justify-content-center"},t._l(t.listData,(function(e,n){return i("div",{key:e.id,staticClass:"col-4",on:{click:function(i){return t.playSong(e.id,e.name)}}},[i("div",{staticClass:"card h-100"},[i("img",{staticClass:"card-img-top",attrs:{src:e.album.images[1].url,alt:""}}),i("div",{staticClass:"d-flex"},[i("h4",{staticClass:"topRank d-flex justify-content-center align-items-center mb-0"},[t._v(t._s(n+1))]),i("div",{staticClass:"card-body pl-0"},[i("h5",[t._v(t._s(e.name))]),i("p",{staticClass:"card-text"},[t._v(t._s(e.album.artist.name))])])])])])})),0)])},c=[],l=i("2f62");function u(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function p(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?u(Object(i),!0).forEach((function(e){Object(o["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var h={name:"TopThree",props:{listData:{type:Array,required:!0}},computed:p({},Object(l["e"])(["key"])),methods:{playSong:function(t,e){this.$store.commit("SET_MUSIC_ID",t),this.getAllVideoId(e)},playListSong:function(t){this.$store.commit("SET_VIDEO_ID",t),this.$store.commit("SET_PLAYER_TYPE","youtube")},getAllVideoId:function(t){var e=this;this.$http.get("https://www.googleapis.com/youtube/v3/search?key=".concat(this.key,"&part=snippet&type=video&q=").concat(t)).then((function(t){e.playListSong(t.data.items[0].id.videoId)}))}}},d=h,f=(i("6d81"),i("2877")),b=Object(f["a"])(d,r,c,!1,null,"0dd1aa2e",null),y=b.exports;function g(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function m(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?g(Object(i),!0).forEach((function(e){Object(o["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):g(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var v={data:function(){return{listData:[],videoIdList:[],title:"",access_token:""}},components:{ListTable:a["a"],TopThreeCard:y},computed:m({},Object(l["c"])(["getApiConfig"]),{},Object(l["e"])(["key"]),{topThree:function(){return this.listData.slice(0,3)},other:function(){return this.listData.slice(4)}}),methods:{getSongLsit:function(t){var e=this,i=this.getApiConfig;this.$http.get("https://api.kkbox.com/v1.1/charts/".concat(t,"/tracks?territory=TW&limit=25"),i).then((function(t){e.listData=t.data.data}))},getAllVideoId:function(){var t=this;this.listData.forEach((function(e){t.$http.get("https://www.googleapis.com/youtube/v3/search?key=".concat(t.key,"&part=snippet&type=video&q=").concat(e.name)).then((function(e){t.videoIdList.push(e.data.items[0].id.videoId)}))}))},login:function(){var t=this;!0!==this.$isAuthenticated()?this.$login():this.$getGapiClient().then((function(e){t.access_token=e.client.getToken().access_token,t.createPlayList()}))},createPlayList:function(){var t=this,e={snippet:{title:this.title,description:this.title,tags:[this.title],defaultLanguage:"tc"},status:{privacyStatus:"private"}},i={headers:{Authorization:"Bearer ".concat(this.access_token)}};this.$http.post("https://www.googleapis.com/youtube/v3/playlists?part=snippet%2Cstatus&key=".concat(this.key),e,i).then((function(e){t.addSong(e.data.id)}))},addSong:function(t){var e=this;this.videoIdList.forEach((function(i){var n={snippet:{playlistId:t,position:0,resourceId:{kind:"youtube#video",videoId:"playListID"}}},s={headers:{Authorization:"Bearer ".concat(e.access_token)}};e.$http.post("https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&key=".concat(e.key),n,s).then((function(){e.playListSong(t)}))}))},playListSong:function(t){this.$store.commit("SET_VIDEO_ID",t)},playKKlist:function(){this.$store.commit("SET_LIST_ID",this.$route.query.id),this.$store.commit("SET_PLAYER_TYPE","kkbox")}},mounted:function(){this.getSongLsit(this.$route.query.id),this.title=this.$route.query.title}},O=v,w=(i("91b4"),Object(f["a"])(O,n,s,!1,null,null,null));e["default"]=w.exports},"6d81":function(t,e,i){"use strict";var n=i("b7e5"),s=i.n(n);s.a},"91b4":function(t,e,i){"use strict";var n=i("47c4"),s=i.n(n);s.a},b0c0:function(t,e,i){var n=i("83ab"),s=i("9bf2").f,o=Function.prototype,a=o.toString,r=/^\s*function ([^ (]*)/,c="name";!n||c in o||s(o,c,{configurable:!0,get:function(){try{return a.call(this).match(r)[1]}catch(t){return""}}})},b7e5:function(t,e,i){}}]);
//# sourceMappingURL=SongList.d0c21e35.js.map